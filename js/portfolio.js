// Данные для галереи
const galleryData = {
    profHighRiseCeiling: {
        title: "Профессиональный высотный клининг потолочного пространства любой сложности",
        images: [
            "img/works/profHighRiseCeiling/work1.jpg",
            "img/works/profHighRiseCeiling/work2.jpg",
            "img/works/profHighRiseCeiling/work3.jpg",
            "img/works/profHighRiseCeiling/work4.jpg",
            "img/works/profHighRiseCeiling/work5.jpg",
            "img/works/profHighRiseCeiling/work6.jpg",
            "img/works/profHighRiseCeiling/work7.jpg",
            "img/works/profHighRiseCeiling/work8.jpg",
            "img/works/profHighRiseCeiling/work9.jpg",
            "img/works/profHighRiseCeiling/work10.jpg",
            "img/works/profHighRiseCeiling/work11.jpg",
            "img/works/profHighRiseCeiling/work12.jpg",
            "img/works/profHighRiseCeiling/work13.jpg",
            "img/works/profHighRiseCeiling/work14.jpg",
            "img/works/profHighRiseCeiling/work15.jpg",
            "img/works/profHighRiseCeiling/work16.jpg",
            "img/works/profHighRiseCeiling/work17.jpg"
        ]
    },
    highRiseCleanOfWindow: {
        title: "Высотная мойка окон и фасадов зданий", 
        images: [
            "img/works/highRiseCleanOfWindow/work1.jpg",
            "img/works/highRiseCleanOfWindow/work2.jpg",
            "img/works/highRiseCleanOfWindow/work3.jpg",
            "img/works/highRiseCleanOfWindow/work4.jpg",
            "img/works/highRiseCleanOfWindow/work5.jpg",
            "img/works/highRiseCleanOfWindow/work6.jpg",
            "img/works/highRiseCleanOfWindow/work7.jpg",
            "img/works/highRiseCleanOfWindow/work8.jpg",
            "img/works/highRiseCleanOfWindow/work9.jpg",
            "img/works/highRiseCleanOfWindow/work10.jpg",
            "img/works/highRiseCleanOfWindow/work11.jpg",
            "img/works/highRiseCleanOfWindow/work12.jpg",
            "img/works/highRiseCleanOfWindow/work13.jpg",
            "img/works/highRiseCleanOfWindow/work14.jpg",
            "img/works/highRiseCleanOfWindow/work15.jpg",
            "img/works/highRiseCleanOfWindow/work16.jpg",
            "img/works/highRiseCleanOfWindow/work17.jpg",
            "img/works/highRiseCleanOfWindow/work18.jpg",
            "img/works/highRiseCleanOfWindow/work19.jpg",
            "img/works/highRiseCleanOfWindow/work20.jpg",
            "img/works/highRiseCleanOfWindow/work21.jpg",
            "img/works/highRiseCleanOfWindow/work22.jpg",
            "img/works/highRiseCleanOfWindow/work23.jpg",
            "img/works/highRiseCleanOfWindow/work24.jpg",
            "img/works/highRiseCleanOfWindow/work25.jpg",
            "img/works/highRiseCleanOfWindow/work26.jpg",
            "img/works/highRiseCleanOfWindow/work27.jpg",
            "img/works/highRiseCleanOfWindow/work28.jpg"
        ]
    },
    postConstruction: {
        title: "Послестроительная уборка",
        images: [
            "img/works/postConstruction/work1.jpg",
            "img/works/postConstruction/work2.jpg",
            "img/works/postConstruction/work3.jpg",
            "img/works/postConstruction/work4.jpg",
            "img/works/postConstruction/work12.jpg",
            "img/works/postConstruction/work13.jpg",
            "img/works/postConstruction/work14.jpg",
            "img/works/postConstruction/work15.jpg",
            "img/works/postConstruction/work16.jpg",
            "img/works/postConstruction/work17.jpg",
            "img/works/postConstruction/work18.jpg",
            "img/works/postConstruction/work19.jpg",
            "img/works/postConstruction/work20.jpg",
            "img/works/postConstruction/work21.jpg",
            "img/works/postConstruction/work22.jpg",
            "img/works/postConstruction/work23.jpg",
            "img/works/postConstruction/work25.jpg",
            "img/works/postConstruction/work26.jpg",
            "img/works/postConstruction/work27.jpg",
            "img/works/postConstruction/work28.png",
            "img/works/postConstruction/work29.png",
            "img/works/postConstruction/work30.jpg",
            "img/works/postConstruction/work31.jpg",
            "img/works/postConstruction/work32.png",
            "img/works/postConstruction/work33.jpg",
            "img/works/postConstruction/work34.jpg",
            "img/works/postConstruction/work35.jpg",
            "img/works/postConstruction/work36.jpg",
            "img/works/postConstruction/work37.jpg",
            "img/works/postConstruction/work38.jpg",
            "img/works/postConstruction/work39.jpg",
            "img/works/postConstruction/work40.jpg",
            "img/works/postConstruction/work41.jpg"
        ]
    },
    industrialPremises: {
        title: "Уборка производственных и непроизводственных помещений",
        images: [
            "img/works/industrialPremises/work2.jpg",
            "img/works/industrialPremises/work3.jpg",
            "img/works/industrialPremises/work4.jpg",
            "img/works/industrialPremises/work5.jpg",
            "img/works/industrialPremises/work6.jpg",
            "img/works/industrialPremises/work7.jpg",
            "img/works/industrialPremises/work8.jpg",
            "img/works/industrialPremises/work9.jpg",
            "img/works/industrialPremises/work10.jpg",
            "img/works/industrialPremises/work11.jpg",
            "img/works/industrialPremises/work12.jpg",
            "img/works/industrialPremises/work13.jpg",
            "img/works/industrialPremises/work14.jpg",
            "img/works/industrialPremises/work15.jpg",
            "img/works/industrialPremises/work16.jpg",
            "img/works/industrialPremises/work17.jpg",
            "img/works/industrialPremises/work18.jpg",
            "img/works/industrialPremises/work19.jpg",
            "img/works/industrialPremises/work20.jpg",
            "img/works/industrialPremises/work21.jpg",
            "img/works/industrialPremises/work22.jpg",
            "img/works/industrialPremises/work23.jpg",
            "img/works/industrialPremises/work24.jpg",
            "img/works/industrialPremises/work25.jpg",
            "img/works/industrialPremises/work26.jpg",
            "img/works/industrialPremises/work27.jpg",
            "img/works/industrialPremises/work28.jpg",
            "img/works/industrialPremises/work29.jpg",
            "img/works/industrialPremises/work30.jpg",
            "img/works/industrialPremises/work31.jpg",
            "img/works/industrialPremises/work32.jpg",
            "img/works/industrialPremises/work33.jpg",
            "img/works/industrialPremises/work34.jpg",
            "img/works/industrialPremises/work35.jpg",
            "img/works/industrialPremises/work36.jpg",
            "img/works/industrialPremises/work37.jpg",
            "img/works/industrialPremises/work38.jpg",
            "img/works/industrialPremises/work39.jpg",
            "img/works/industrialPremises/work40.jpg"
        ]
    },
    deepCleaning: {
        title: "Глубокая чистка напольных покрытий с помощью роторного оборудования",
        images: [
            "img/works/deepCleaning/work1.jpg",
            "img/works/deepCleaning/work2.jpg",
            "img/works/deepCleaning/work3.jpg",
            "img/works/deepCleaning/work4.jpg",
            "img/works/deepCleaning/work5.jpg",
            "img/works/deepCleaning/work6.jpg",
            "img/works/deepCleaning/work7.jpg",
            "img/works/deepCleaning/work8.jpg",
            "img/works/deepCleaning/work9.jpg",
            "img/works/deepCleaning/work10.jpg",
            "img/works/deepCleaning/work11.jpg",
            "img/works/deepCleaning/work12.jpg"
        ]
    },
    profDry: {
        title: "Профессиональная химчистка напольных покрытий и мягкой мебели",
        images: [
            "img/works/profDry/work1.jpg",
            "img/works/profDry/work2.jpg",
            "img/works/profDry/work3.jpg",
            "img/works/profDry/work4.jpg",
            "img/works/profDry/work5.jpg",
            "img/works/profDry/work6.jpg",
            "img/works/profDry/work7.jpg",
            "img/works/profDry/work8.jpg",
            "img/works/profDry/work9.jpg",
            "img/works/profDry/work10.jpg",
            "img/works/profDry/work11.jpg",
            "img/works/profDry/work12.jpg",
            "img/works/profDry/work14.jpg",
            "img/works/profDry/work15.jpg",
            "img/works/profDry/work16.jpg",
            "img/works/profDry/work17.jpg",
            "img/works/profDry/work18.jpg"
        ]
    },
    generalCleaning: {
        title: "Генеральная уборка офисов, коттеджей",
        images: [
            "img/works/generalCleaning/work1.jpg",
            "img/works/generalCleaning/work3.jpg",
            "img/works/generalCleaning/work4.jpg",
            "img/works/generalCleaning/work5.jpg",
            "img/works/generalCleaning/work6.jpg",
            "img/works/generalCleaning/work7.jpg",
            "img/works/generalCleaning/work8.jpg",
            "img/works/generalCleaning/work9.jpg",
            "img/works/generalCleaning/work10.jpg",
            "img/works/generalCleaning/work11.jpg",
            "img/works/generalCleaning/work12.jpg",
            "img/works/generalCleaning/work13.jpg",
            "img/works/generalCleaning/work14.jpg",
            "img/works/generalCleaning/work15.jpg",
            "img/works/generalCleaning/work16.jpg",
            "img/works/generalCleaning/work17.jpg",
            "img/works/generalCleaning/work18.jpg",
            "img/works/generalCleaning/work19.jpg",
            "img/works/generalCleaning/work20.jpg",
            "img/works/generalCleaning/work21.jpg",
            "img/works/generalCleaning/work22.jpg",
            "img/works/generalCleaning/work23.jpg",
            "img/works/generalCleaning/work24.jpg",
            "img/works/generalCleaning/work25.jpg",
            "img/works/generalCleaning/work27.jpg",
            "img/works/generalCleaning/work31.jpg",
            "img/works/generalCleaning/work32.jpg",
            "img/works/generalCleaning/work33.jpg",
            "img/works/generalCleaning/work34.jpg",
            "img/works/generalCleaning/work35.jpg",
            "img/works/generalCleaning/work36.jpg",
            "img/works/generalCleaning/work37.jpg",
            "img/works/generalCleaning/work38.jpg",
            "img/works/generalCleaning/work39.jpg",
            "img/works/generalCleaning/work40.jpg",
            "img/works/generalCleaning/work41.jpg",
            "img/works/generalCleaning/work42.jpg",
            "img/works/generalCleaning/work43.jpg",
            "img/works/generalCleaning/work44.jpg",
            "img/works/generalCleaning/work45.jpg",
            "img/works/generalCleaning/work46.jpg",
            "img/works/generalCleaning/work47.jpg",
            "img/works/generalCleaning/work48.jpg",
            "img/works/generalCleaning/work49.jpg",
            "img/works/generalCleaning/work50.jpg",
            "img/works/generalCleaning/work51.jpg",
            "img/works/generalCleaning/work52.jpg",
            "img/works/generalCleaning/work53.jpg",
            "img/works/generalCleaning/work54.jpg",
            "img/works/generalCleaning/work55.jpg",
            "img/works/generalCleaning/work56.jpg",
            "img/works/generalCleaning/work57.jpg",
            "img/works/generalCleaning/work58.jpg",
            "img/works/generalCleaning/work59.jpg",
            "img/works/generalCleaning/work60.jpg"
        ]
    },
    eventsCleaninig: {
        title: "Уборка на мероприятиях",
        images: [
            "img/works/eventsCleaninig/work1.jpg",
            "img/works/eventsCleaninig/work2.jpg",
            "img/works/eventsCleaninig/work3.jpg",
            "img/works/eventsCleaninig/work4.jpg"
        ]
    },
    profCleanBoats: {
        title: "Профессиональный клининг катеров, лодок, яхт",
        images: [
            "img/works/profCleanBoats/work1.jpg",
            "img/works/profCleanBoats/work2.jpg",
            "img/works/profCleanBoats/work3.jpg",
            "img/works/profCleanBoats/work4.jpg",
            "img/works/profCleanBoats/work5.jpg",
            "img/works/profCleanBoats/work6.jpg",
            "img/works/profCleanBoats/work7.jpg",
            "img/works/profCleanBoats/work8.jpg",
            "img/works/profCleanBoats/work9.jpg",
            "img/works/profCleanBoats/work10.jpg",
            "img/works/profCleanBoats/work11.jpg",
            "img/works/profCleanBoats/work12.jpg",
            "img/works/profCleanBoats/work13.jpg",
            "img/works/profCleanBoats/work14.jpg"
        ]
    },
    generalFitnessSpa: {
        title: "Генеральная уборка Fitness, Wellness, SPA центров",
        images: [
            "img/works/generalFitnessSpa/work1.jpg",
            "img/works/generalFitnessSpa/work2.jpg",
            "img/works/generalFitnessSpa/work3.jpg",
            "img/works/generalFitnessSpa/work4.jpg",
            "img/works/generalFitnessSpa/work5.jpg",
            "img/works/generalFitnessSpa/work6.jpg",
            "img/works/generalFitnessSpa/work7.jpg",
            "img/works/generalFitnessSpa/work8.jpg",
            "img/works/generalFitnessSpa/work9.jpg",
            "img/works/generalFitnessSpa/work10.jpg"
        ]
    },
    cleanGarage: {
        title: "Уборка гаражей",
        images: [
            "img/works/cleanGarage/work1.jpg",
            "img/works/cleanGarage/work2.jpg",
            "img/works/cleanGarage/work3.jpg",
            "img/works/cleanGarage/work4.jpg",
            "img/works/cleanGarage/work5.jpg"
        ]
    },
    equipment: {
        title: "Оборудование",
        images: [
            {
                src: "img/works/equipment/Ballu.jpg",
                caption: "Осушитель воздуха промышленный Ballu BDI-80L"
            },
            {
                src: "img/works/equipment/ADS328.jpg",
                caption: "Промышленный пылесос ADS328"
            },
            {
                src: "img/works/equipment/Aksion.jpg",
                caption: "Промышленный озонатор Аксион П-80 0-007"
            },
            {
                src: "img/works/equipment/Karcher.jpg",
                caption: "Профессиональный аккумуляторный стеклоочиститель Karcher WVP 10"
            },
            {
                src: "img/works/equipment/KarcherHD.jpg",
                caption: "Аппарат высокого давления Karcher HD 5/17 C"
            },
            {
                src: "img/works/equipment/HobotR3.jpg",
                caption: "Робот-мойщик окон Hobot-R3 90 Вт 0.04 л"
            },
            {
                src: "img/works/equipment/KarcherB.jpg",
                caption: "Поломоечная машина Karcher B 150 R Bp D90"
            },
            {
                src: "img/works/equipment/KarcherEasyFix.jpg",
                caption: "Пароочиститель Karcher SC 4 EasyFix"
            },
            {
                src: "img/works/equipment/karcherWD.jpg",
                caption: "Хозяйственный пылесос WD 6 P S V-30/6/22/T"
            },
            {
                src: "img/works/equipment/Baiyun.jpg",
                caption: "Пылесос Baiyun 70л 3 турбины PS-0118"
            },
            {
                src: "img/works/equipment/KarcherBDS.png",
                caption: "Уборочная машина Karcher BDS 43/150 C Classic"
            },
            {
                src: "img/works/equipment/SantoemmaSabrina.jpg",
                caption: "Пенный экстрактор Santoemma Sabrina SW15"
            },
            {
                src: "img/works/equipment/KarcherPuzzi.jpg",
                caption: "Моющий пылесос Karcher Puzzi 10/1"
            },
            {
                src: "img/works/equipment/unger.jpg",
                caption: "Телескопические штанги UNGER"
            },
        ]
    }
};

// Переменные для управления галереей
let currentAlbum = null;
let currentIndex = 0;

// Функция для обновления счетчиков фото
function updatePhotoCounters() {
    const portfolioCards = document.querySelectorAll('.portfolio-card');
    
    portfolioCards.forEach(card => {
        const albumName = card.dataset.album;
        const photoCountElement = card.querySelector('.photo-count');
        
        if (galleryData[albumName]) {
            const photoCount = galleryData[albumName].images.length;
            photoCountElement.textContent = `${photoCount} фото`;
        }
    });
}

// Функция открытия галереи
function openGallery(albumName) {
    const album = galleryData[albumName];
    if (!album || album.images.length === 0) return;
    
    currentAlbum = albumName;
    currentIndex = 0;
    
    updateGallery();
    document.getElementById('galleryModal').style.display = 'block';
    document.body.style.overflow = 'hidden';
}

// Функция закрытия галереи
function closeGallery() {
    document.getElementById('galleryModal').style.display = 'none';
    document.body.style.overflow = 'auto';
}

// Функция перехода к предыдущему изображению
function prevImage() {
    if (!currentAlbum) return;
    
    const album = galleryData[currentAlbum];
    currentIndex = (currentIndex - 1 + album.images.length) % album.images.length;
    updateGallery();
}

// Функция перехода к следующему изображению
function nextImage() {
    if (!currentAlbum) return;
    
    const album = galleryData[currentAlbum];
    currentIndex = (currentIndex + 1) % album.images.length;
    updateGallery();
}

// Функция обновления галереи
function updateGallery() {
    const album = galleryData[currentAlbum];
    if (!album) return;
    
    const currentImage = document.getElementById('galleryCurrentImage');
    const counter = document.getElementById('galleryCounter');
    const thumbnails = document.getElementById('galleryThumbnails');
    const caption = document.getElementById('galleryCaption');
    
    // Получаем данные изображения (может быть объектом или строкой)
    const imageData = album.images[currentIndex];
    const imageSrc = typeof imageData === 'string' ? imageData : imageData.src;
    const imageCaption = typeof imageData === 'string' ? '' : imageData.caption;
    
    // Обновление основного изображения
    currentImage.src = imageSrc;
    currentImage.alt = album.title;
    
    // Обновление подписи
    if (caption) {
        caption.textContent = imageCaption;
        caption.style.display = imageCaption ? 'block' : 'none';
    }
    
    // Обновление счетчика
    counter.textContent = `${currentIndex + 1}/${album.images.length}`;
    
    // Обновление миниатюр
    thumbnails.innerHTML = '';
    album.images.forEach((imageData, index) => {
        const imageSrc = typeof imageData === 'string' ? imageData : imageData.src;
        const thumbnail = document.createElement('div');
        thumbnail.className = `gallery-thumbnail ${index === currentIndex ? 'active' : ''}`;
        thumbnail.innerHTML = `<img src="${imageSrc}" alt="${album.title}">`;
        thumbnail.onclick = () => {
            currentIndex = index;
            updateGallery();
        };
        thumbnails.appendChild(thumbnail);
    });
}

// Обработчик клавиатуры
function handleKeyboard(e) {
    if (document.getElementById('galleryModal').style.display === 'block') {
        if (e.key === 'Escape') closeGallery();
        if (e.key === 'ArrowLeft') prevImage();
        if (e.key === 'ArrowRight') nextImage();
    }
}

// Инициализация при загрузке страницы
document.addEventListener('DOMContentLoaded', function() {
    updatePhotoCounters();
    
    // Обработчики кликов по карточкам
    document.querySelectorAll('.portfolio-card').forEach(card => {
        card.addEventListener('click', () => {
            openGallery(card.dataset.album);
        });
    });
    
    // Обработчики для кнопок галереи
    document.getElementById('galleryClose').addEventListener('click', closeGallery);
    document.getElementById('galleryPrev').addEventListener('click', prevImage);
    document.getElementById('galleryNext').addEventListener('click', nextImage);
    
    // Обработчик клавиатуры
    document.addEventListener('keydown', handleKeyboard);
    
    // Закрытие по клику на фон
    document.getElementById('galleryModal').addEventListener('click', function(e) {
        if (e.target === this) closeGallery();
    });
});